init -99 python:

    # 中文输入法词库（简化的拼音词库）
    PINYIN_DICT={
    # 七、声母g开头拼音（新增完整覆盖）
    "ga": ["嘎", "噶", "尜", "旮", "钆", "轧", "尬", "尕", "玍", "呷", "嘎嘎", "噶伦", "尜尜"],
    "ge": ["戈", "疙", "咯", "哥", "歌", "搁", "戈", "圪", "纥", "疙", "咯", "哥", "歌", "搁", "割", "鸽", "阁", "格", "葛", "蛤", "隔", "革", "嗝", "膈", "镉", "个", "各"],
    "gu": ["估", "咕", "沽", "姑", "菇", "孤", "辜", "箍", "古", "谷", "股", "鼓", "蛊", "骨", "牯", "贾", "诂", "牿", "固", "故", "顾", "雇", "崮", "梏", "牿", "痼", "锢", "鸪", "鹄", "酤", "觚"],
    "gai": ["该", "垓", "陔", "荄", "改", " gai", "丐", "钙", "盖", "溉", "概", "戤", "赅", "陔", "荄", "改", "丐", "钙", "盖", "溉", "概"],
    "gei": ["给", "给以", "给予", "给养", "供给", "配给", "补给", "给付", "给事中"],
    "gao": ["羔", "高", "皋", "睾", "膏", "篙", "糕", "搞", "稿", "镐", "杲", "缟", "槁", "杲", "搞", "稿", "镐", "缟", "槁", "告", "诰", "郜", "锆", "膏"],
    "gou": ["勾", "句", "沟", "钩", "苟", "狗", "枸", "构", "购", "够", "诟", "垢", "媾", "遘", "觏", "彀", "篝", "鞲", "苟", "狗", "构", "购", "够"],
    "gan": ["干", "甘", "杆", "肝", "柑", "竿", "酐", "尴", "秆", "赶", "敢", "感", "橄", "擀", "淦", "绀", "旰", "矸", "疳", "酐", "干", "甘", "杆", "肝", "柑", "竿", "尴"],
    "gen": ["根", "跟", "亘", "茛", "哏", "艮", " Gen", "根", "跟", "亘", "茛", "哏", "艮"],
    "gang": ["冈", "刚", "纲", "肛", "缸", "钢", "罡", "岗", "港", "杠", "戆", "筻", "冈", "刚", "纲", "肛", "缸", "钢", "岗", "港", "杠"],
    "geng": ["庚", "更", "羹", "埂", "耿", "梗", "哽", "赓", "绠", "鲠", "羹", "埂", "耿", "梗", "哽", "赓", "绠", "鲠"],
    "gong": ["工", "弓", "公", "功", "攻", "供", "宫", "恭", "蚣", "躬", "龚", "巩", "汞", "拱", "共", "贡", "供", "肱", "觥", "蚣", "工", "弓", "公", "功", "攻", "供", "宫"],

    # 八、声母k开头拼音（新增完整覆盖）
    "ka": ["咖", "喀", "卡", "佧", "咔", "喀", "卡", "佧", "咔", "咖", "喀", "卡", "佧", "咔"],
    "ke": ["坷", "苛", "柯", "棵", "科", "轲", "疴", "窠", "颗", "磕", "瞌", "壳", "咳", "可", "渴", "克", "刻", "客", "课", "氪", "溘", "缂", "嗑", "蝌", "柯", "棵", "科"],
    "ku": ["枯", "骷", "哭", "窟", "苦", "库", "绔", "裤", "酷", "喾", "堀", "枯", "骷", "哭", "窟", "苦", "库", "绔", "裤", "酷"],
    "kai": ["开", "揩", "锎", "凯", "垲", "铠", "慨", "楷", "锴", "开", "揩", "凯", "垲", "铠", "慨", "楷", "锴"],
    "kei": ["剋", "克", "kei", "剋", "克"],
    "kao": ["尻", "考", "拷", "烤", "铐", "犒", "栲", "尻", "考", "拷", "烤", "铐", "犒", "栲"],
    "kou": ["抠", "口", "叩", "扣", "寇", "蔻", "抠", "口", "叩", "扣", "寇", "蔻"],
    "kan": ["刊", "堪", "勘", "龛", "坎", "砍", "侃", "看", "瞰", "阚", "墈", "龛", "坎", "砍", "侃", "看", "瞰", "阚"],
    "ken": ["肯", "垦", "恳", "啃", "裉", "肯", "垦", "恳", "啃", "裉"],
    "kang": ["康", "慷", "糠", "扛", "抗", "亢", "炕", "伉", "闶", "糠", "扛", "抗", "亢", "炕", "伉", "闶"],
    "keng": ["坑", "吭", "铿", "硁", "坑", "吭", "铿", "硁"],
    "kong": ["空", "崆", "孔", "恐", "控", "空", "崆", "孔", "恐", "控"],

    # 九、声母h开头拼音（新增完整覆盖）
    "ha": ["哈", "蛤", "虾", "哈", "铪", "哈", "蛤", "虾", "哈", "铪"],
    "he": ["呵", "喝", "嗬", "禾", "和", "合", "何", "河", "劾", "阂", "核", "盍", "荷", "菏", "涸", "盒", "劾", "阂", "核", "盍", "荷", "菏", "涸", "盒", "贺", "褐", "赫", "鹤", "壑"],
    "hu": ["乎", "呼", "忽", "瑚", "壶", "葫", "胡", "蝴", "狐", "弧", "斛", "湖", "滹", "糊", "琥", "槲", "蝴", "狐", "弧", "斛", "湖", "滹", "糊", "琥", "槲", "虎", "浒", "唬", "琥", "互", "户", "沪", "护", "戽", "扈", "瓠"],
    "hai": ["咳", "海", "骸", "孩", "还", "亥", "骇", "害", "氦", "骸", "孩", "还", "亥", "骇", "害", "氦"],
    "hei": ["黑", "嘿", "潶", "黑", "嘿", "潶"],
    "hao": ["蒿", "薅", "毫", "豪", "嚎", "壕", "濠", "好", "郝", "号", "皓", "耗", "浩", "灏", "昊", "蒿", "薅", "毫", "豪", "嚎", "壕", "濠", "好"],
    "hou": ["侯", "喉", "猴", "篌", "吼", "后", "厚", "候", "堠", "逅", "后", "厚", "候", "堠", "逅"],
    "han": ["酣", "憨", "蚶", "鼾", "含", "函", "晗", "涵", "寒", "韩", "罕", "喊", "汉", "汗", "旱", "悍", "捍", "菡", "颔", "翰", "憾", "撼", "悍", "捍", "菡", "颔", "翰", "憾", "撼"],
    "hen": ["痕", "很", "狠", "恨", "痕", "很", "狠", "恨"],
    "hang": ["夯", "杭", "航", "吭", "颃", "夯", "杭", "航", "吭", "颃"],
    "heng": ["亨", "哼", "恒", "衡", "珩", "横", "蘅", "亨", "哼", "恒", "衡", "珩", "横", "蘅"],
    "hong": ["哄", "烘", "轰", "訇", "红", "宏", "洪", "虹", "鸿", "泓", "弘", "闳", "黉", "哄", "烘", "轰", "訇", "红", "宏", "洪", "虹", "鸿"],

    # 十、声母j开头拼音（补充缺失项）
    "jia": ["加", "夹", "佳", "珈", "枷", "浃", "家", "痂", "嘉", "镓", "颊", "贾", "甲", "胛", "钾", "假", "价", "驾", "架", "嫁", "稼", "贾", "甲", "胛", "钾", "假", "价"],
    "jie": ["阶", "疖", "皆", "接", "秸", "街", "嗟", "结", "杰", "捷", "睫", "竭", "洁", "结", "杰", "捷", "睫", "竭", "洁", "戒", "诫", "届", "芥", "界", "疥", "诫", "届", "芥", "界"],
    "ju": ["车", "且", "拘", "狙", "驹", "疽", "居", "鞠", "局", "桔", "菊", "橘", "咀", "矩", "举", "沮", "聚", "拒", "炬", "钜", "俱", "倨", "句", "巨", "剧", "惧", "据", "距", "踞"],
    "jian": ["尖", "奸", "歼", "坚", "间", "肩", "艰", "兼", "监", "笺", "菅", "犍", "缄", "煎", "缣", "鲣", "浅", "拣", "枧", "俭", "剪", "检", "柬", "茧", "减", "剪", "检", "柬", "茧", "减"],
    "jin": ["巾", "斤", "今", "金", "津", "筋", "襟", "衿", "仅", "尽", "紧", "堇", "瑾", "锦", "谨", "馑", "浸", "禁", "近", "劲", "进", "靳", "晋", "烬", "浸", "禁", "近", "劲"],
    "jiang": ["江", "姜", "豇", "僵", "缰", "疆", "讲", "奖", "桨", "蒋", "匠", "降", "虹", "酱", "犟", "糨", "讲", "奖", "桨", "蒋", "匠", "降", "虹", "酱"],
    "jing": ["京", "泾", "经", "茎", "荆", "菁", "睛", "晶", "粳", "兢", "精", "井", "阱", "刭", "颈", "景", "憬", "警", "劲", "径", "胫", "痉", "竞", "竟", "境", "颈", "景", "憬", "警"],
    "jiong": ["冂", "扃", "迥", "炯", "窘", "炅", "冂", "扃", "迥", "炯", "窘", "炅"],
    "jiu": ["纠", "鸠", "究", "揪", "啾", "阄", "九", "久", "韭", "灸", "酒", "玖", "韭", "灸", "酒", "玖", "旧", "臼", "咎", "救", "厩", "就", "疚", "舅", "旧", "臼", "咎", "救"],

    # 十一、声母q开头拼音（新增完整覆盖）
    "qa": ["阿", "啊", "吖", "阿", "啊", "吖"],
    "qie": ["切", "茄", "且", "怯", "窃", "惬", "妾", "挈", "锲", "箧", "切", "茄", "且", "怯", "窃", "惬", "妾"],
    "qu": ["区", "曲", "岖", "诎", "驱", "屈", "蛆", "躯", "趋", "渠", "蕖", "璩", "瞿", "氍", "取", "娶", "龋", "去", "趣", "苣", "觑", "取", "娶", "龋", "去", "趣"],
    "qian": ["千", "仟", "阡", "芊", "迁", "佥", "钎", "牵", "悭", "谦", "签", "愆", "铅", "浅", "遣", "谴", "缱", "欠", "倩", "堑", "嵌", "歉", "浅", "遣", "谴", "缱", "欠"],
    "qin": ["亲", "侵", "钦", "衾", "芩", "芹", "秦", "琴", "禽", "勤", "嗪", "寝", "沁", "揿", "亲", "侵", "钦", "衾", "芩", "芹", "秦", "琴", "禽"],
    "qiang": ["呛", "羌", "枪", "戗", "腔", "锵", "羟", "墙", "蔷", "强", "襁", "抢", "镪", "呛", "羌", "枪", "戗", "腔", "锵", "羟", "墙"],
    "qing": ["青", "轻", "氢", "倾", "卿", "清", "蜻", "鲭", "情", "晴", "氰", "擎", "檠", "黥", "请", "顷", "謦", "庆", "箐", "情", "晴", "氰", "擎", "檠", "黥", "请"],
    "qiong": ["邛", "穷", "穹", "茕", "琼", "蛩", "邛", "穷", "穹", "茕", "琼", "蛩"],
    "qiu": ["丘", "邱", "秋", "蚯", "鳅", "楸", "裘", "球", "糗", "囚", "求", "虬", "泅", "酋", "逑", "球", "糗", "囚", "求", "虬", "泅", "酋"],

    # 十二、声母x开头拼音（补充缺失项）
    "xia": ["呷", "虾", "瞎", "辖", "匣", "霞", "遐", "瑕", "暇", "峡", "侠", "狭", "厦", "下", "吓", "夏", "厦", "呷", "虾", "瞎", "辖", "匣", "霞", "遐", "瑕"],
    "xie": ["些", "歇", "蝎", "楔", "鞋", "偕", "谐", "邪", "斜", "胁", "协", "挟", "燮", "亵", "泄", "泻", "谢", "屑", "械", "卸", "榭", "邪", "斜", "胁", "协", "挟", "燮"],
    "xu": ["戌", "胥", "须", "需", "虚", "嘘", "墟", "徐", "许", "诩", "栩", "糈", "旭", "序", "叙", "恤", "絮", "婿", "绪", "续", "酗", "煦", "许", "诩", "栩", "糈", "旭"],
    "xian": ["仙", "先", "纤", "氙", "籼", "掀", "锨", "酰", "跹", "鲜", "闲", "弦", "贤", "咸", "涎", "娴", "舷", "衔", "显", "险", "冼", "铣", "鲜", "闲", "弦", "贤", "咸"],
    "xin": ["心", "芯", "辛", "忻", "昕", "欣", "新", "薪", "馨", "鑫", "囟", "信", "芯", "辛", "忻", "昕", "欣", "新", "薪", "馨"],
    "xiang": ["乡", "相", "香", "厢", "湘", "箱", "缃", "襄", "骧", "镶", "详", "祥", "翔", "享", "响", "饷", "飨", "想", "项", "象", "橡", "详", "祥", "翔", "享", "响", "饷"],
    "xing": ["兴", "星", "腥", "猩", "惺", "兴", "刑", "邢", "形", "型", "陉", "荥", "行", "幸", "性", "姓", "杏", "兴", "刑", "邢", "形", "型", "陉", "荥"],
    "xiong": ["凶", "兄", "匈", "汹", "胸", "雄", "熊", "凶", "兄", "匈", "汹", "胸", "雄", "熊"],
    "xiu": ["休", "修", "庥", "咻", "朽", "糗", "秀", "岫", "绣", "锈", "袖", "溴", "莠", "休", "修", "庥", "咻", "朽", "糗", "秀"],

    # 十三、声母z开头拼音（新增完整覆盖）
    "za": ["扎", "匝", "咂", "杂", "砸", "扎", "匝", "咂", "杂", "砸"],
    "ze": ["则", "择", "责", "泽", "啧", "帻", "舴", "仄", "昃", "则", "择", "责", "泽", "啧", "帻", "舴"],
    "zu": ["租", "菹", "足", "卒", "族", "诅", "阻", "组", "俎", "祖", "祚", "胙", "做", "租", "菹", "足", "卒", "族", "诅", "阻"],
    "zai": ["灾", "哉", "栽", "甾", "宰", "载", "崽", "再", "在", "载", "宰", "载", "崽", "再", "在", "载"],
    "zei": ["贼", "贼", "贼"],
    "zao": ["遭", "糟", "凿", "藻", "枣", "早", "蚤", "澡", "噪", "燥", "躁", "造", "皂", "灶", "唣", "遭", "糟", "凿", "藻", "枣", "早", "蚤"],
    "zou": ["邹", "驺", "诹", "陬", "驺", "邹", "驺", "诹", "陬", "驺", "走", "奏", "揍", "走", "奏", "揍"],
    "zan": ["昝", "簪", "咱", "攒", "趱", "暂", "赞", "瓒", "昝", "簪", "咱", "攒", "趱", "暂", "赞"],
    "zen": ["怎", "谮", "怎", "谮"],
    "zang": ["赃", "脏", "臧", "葬", "藏", "脏", "赃", "脏", "臧", "葬", "藏", "脏"],
    "zeng": ["增", "憎", "缯", "罾", "曾", "综", "赠", "甑", "增", "憎", "缯", "罾", "曾", "综", "赠"],
    "zong": ["宗", "棕", "踪", "鬃", "总", "偬", "纵", "粽", "宗", "棕", "踪", "鬃", "总", "偬", "纵"],

    # 十四、声母c开头拼音（新增完整覆盖）
    "ca": ["擦", "嚓", "礤", "擦", "嚓", "礤"],
    "ce": ["册", "厕", "侧", "测", "恻", "策", "筴", "册", "厕", "侧", "测", "恻", "策", "筴"],
    "cu": ["粗", "殂", "猝", "促", "醋", "簇", "蹙", "蹴", "粗", "殂", "猝", "促", "醋", "簇", "蹙"],
    "cai": ["猜", "才", "材", "财", "裁", "采", "彩", "睬", "踩", "菜", "蔡", "采", "彩", "睬", "踩", "菜", "蔡"],
    "cen": ["参", "岑", "涔", "参", "岑", "涔"],
    "cao": ["操", "糙", "槽", "曹", "嘈", "漕", "螬", "艚", "草", "操", "糙", "槽", "曹", "嘈", "漕"],
    "cou": ["凑", "辏", "腠", "凑", "辏", "腠"],
    "can": ["参", "餐", "骖", "残", "蚕", "惭", "惨", "灿", "璨", "粲", "黪", "参", "餐", "骖", "残", "蚕", "惭"],
    "ceng": ["层", "曾", "噌", "嶒", "层", "曾", "噌", "嶒"],
    "cang": ["仓", "伧", "沧", "苍", "舱", "藏", "仓", "伧", "沧", "苍", "舱", "藏"],
    "cong": ["匆", "苁", "囱", "枞", "葱", "骢", "聪", "丛", "淙", "琮", "匆", "苁", "囱", "枞", "葱", "骢"],

    # 十五、声母s开头拼音（新增完整覆盖）
    "sa": ["仨", "撒", "洒", "萨", "飒", "卅", "仨", "撒", "洒", "萨", "飒", "卅"],
    "se": ["色", "涩", "啬", "铯", "瑟", "塞", "穑", "色", "涩", "啬", "铯", "瑟", "塞", "穑"],
    "su": ["苏", "酥", "俗", "夙", "诉", "肃", "涑", "宿", "粟", "谡", "塑", "溯", "愫", "簌", "蔌", "苏", "酥", "俗", "夙", "诉", "肃"],
    "sai": ["腮", "鳃", "塞", "噻", "赛", "腮", "鳃", "塞", "噻", "赛"],
    "sui": ["尿", "虽", "荽", "绥", "隋", "随", "髓", "碎", "岁", "穗", "遂", "隧", "祟", "尿", "虽", "荽", "绥", "隋", "随"],
    "sao": ["搔", "骚", "缫", "臊", "扫", "嫂", "埽", "瘙", "骚", "缫", "臊", "扫", "嫂", "埽"],
    "sou": ["搜", "嗖", "馊", "溲", "飕", "艘", "叟", "瞍", "擞", "嗾", "嗽", "搜", "嗖", "馊", "溲", "飕", "艘"],
    "san": ["三", "叁", "毵", "伞", "散", "糁", "三", "叁", "毵", "伞", "散", "糁"],
    "sen": ["森", "椮", "森", "椮"],
    "sang": ["桑", "搡", "嗓", "丧", "桑", "搡", "嗓", "丧"],
    "seng": ["僧", "僧"],
    "song": ["松", "淞", "菘", "嵩", "怂", "耸", "悚", "竦", "讼", "宋", "诵", "送", "颂", "松", "淞", "菘", "嵩", "怂", "耸"],

    # 十六、声母zh开头拼音（新增完整覆盖）
    "zha": ["扎", "喳", "楂", "渣", "札", "轧", "铡", "闸", "眨", "砟", "乍", "诈", "炸", "咤", "栅", "榨", "扎", "喳", "楂", "渣", "札", "轧", "铡"],
    "zhe": ["遮", "折", "哲", "辄", "蛰", "谪", "折", "磔", "者", "锗", "赭", "褶", "这", "浙", "蔗", "鹧", "遮", "折", "哲", "辄", "蛰", "谪"],
    "zhu": ["朱", "珠", "株", "诛", "蛛", "诸", "猪", "铢", "槠", "潴", "竹", "烛", "逐", "躅", "主", "拄", "渚", "煮", "褚", "嘱", "瞩", "朱", "珠", "株", "诛", "蛛"],
    "zhai": ["斋", "摘", "宅", "择", "翟", "窄", "债", "寨", "砦", "瘵", "斋", "摘", "宅", "择", "翟", "窄"],
    "zhei": ["这", "这"],
    "zhao": ["钊", "招", "昭", "啁", "着", "钊", "招", "昭", "啁", "着", "找", "沼", "爪", "找", "沼", "爪", "召", "兆", "诏", "赵", "棹", "照"],
    "zhou": ["州", "舟", "诌", "周", "洲", "粥", "妯", "轴", "肘", "帚", "咒", "皱", "绉", "昼", "宙", "胄", "骤", "州", "舟", "诌", "周", "洲", "粥"],
    "zhan": ["沾", "毡", "粘", "詹", "谵", "瞻", "占", "战", "栈", "站", "绽", "湛", "颤", "蘸", "沾", "毡", "粘", "詹", "谵", "瞻", "占"],
    "zhen": ["贞", "针", "侦", "珍", "胗", "真", "砧", "祯", "斟", "甄", "箴", "诊", "枕", "疹", "畛", "缜", "稹", "贞", "针", "侦", "珍", "胗", "真"],
    "zhang": ["张", "章", "漳", "樟", "璋", "彰", "獐", "长", "涨", "掌", "仉", "丈", "仗", "帐", "胀", "涨", "障", "嶂", "瘴", "张", "章", "漳", "樟"],
    "zheng": ["正", "怔", "争", "征", "峥", "挣", "狰", "睁", "筝", "蒸", "拯", "整", "政", "症", "证", "郑", "诤", "正", "怔", "争", "征", "峥", "挣"],
    "zhong": ["中", "盅", "忠", "钟", "衷", "终", "舯", "仲", "众", "种", "肿", "重", "踵", "中", "盅", "忠", "钟", "衷", "终", "舯"],

    # 十七、声母ch开头拼音（新增完整覆盖）
    "cha": ["叉", "杈", "差", "插", "馇", "喳", "猹", "搽", "察", "岔", "诧", "姹", "衩", "刹", "侘", "杈", "差", "插", "馇", "喳", "猹"],
    "che": ["车", "砗", "扯", "掣", "彻", "澈", "撤", "坼", "车", "砗", "扯", "掣", "彻", "澈", "撤"],
    "chu": ["出", "刍", "初", "樗", "除", "厨", "锄", "滁", "蜍", "雏", "橱", "蹰", "础", "储", "楮", "楚", "处", "杵", "楮", "楚", "处", "杵"],
    "chai": ["差", "钗", "拆", "柴", "豺", "侪", "瘥", "虿", "差", "钗", "拆", "柴", "豺", "侪"],
    "chen": ["琛", "嗔", "宸", "辰", "沉", "忱", "陈", "谌", "宸", "辰", "沉", "忱", "陈", "谌", "趁", "衬", "称", "龀", "趁", "衬", "称"],
    "chao": ["抄", "钞", "超", "剿", "晁", "巢", "朝", "嘲", "潮", "吵", "炒", "耖", "抄", "钞", "超", "剿", "晁", "巢", "朝"],
    "chou": ["抽", "瘳", "酬", "愁", "绸", "稠", "惆", "筹", "踌", "俦", "帱", "丑", "瞅", "臭", "抽", "瘳", "酬", "愁", "绸", "稠"],
    "chan": ["搀", "掺", "蝉", "馋", "谗", "缠", "禅", "蟾", "躔", "产", "谄", "铲", "阐", "蒇", "忏", "颤", "搀", "掺", "蝉", "馋", "谗"],
    "chang": ["昌", "伥", "娼", "猖", "菖", "阊", "偿", "常", "长", "肠", "苌", "尝", "徜", "厂", "场", "敞", "氅", "畅", "唱", "倡", "昌", "伥", "娼"],
    "cheng": ["成", "丞", "呈", "诚", "承", "城", "乘", "程", "惩", "澄", "橙", "逞", "骋", "秤", "成", "丞", "呈", "诚", "承", "城"],
    "chong": ["充", "冲", "忡", "憧", "舂", "崇", "宠", "铳", "充", "冲", "忡", "憧", "舂", "崇", "宠"],

    # 十八、声母sh开头拼音（补充缺失项）
    "sha": ["沙", "纱", "砂", "莎", "痧", "杀", "刹", "铩", "沙", "纱", "砂", "莎", "痧", "杀", "刹", "铩", "傻", "啥", "傻", "啥", "厦", "煞", "歃", "厦"],
    "she": ["奢", "赊", "畲", "舌", "蛇", "舍", "赦", "佘", "揲", "设", "社", "舍", "射", "涉", "赦", "麝", "奢", "赊", "畲", "舌", "蛇", "舍"],
    "shu": ["书", "殳", "抒", "纾", "叔", "枢", "姝", "殊", "梳", "淑", "舒", "疏", "蔬", "摅", "输", "黍", "暑", "黍", "暑", "署", "蜀", "鼠", "数", "属", "蜀"],
    "shai": ["筛", "晒", "酾", "筛", "晒", "酾"],
    "shei": ["谁", "谁"],
    "shao": ["捎", "梢", "烧", "芍", "苕", "韶", "少", "邵", "劭", "绍", "哨", "梢", "烧", "芍", "苕", "韶", "少", "邵", "劭"],
    "shou": ["收", "手", "守", "首", "寿", "受", "授", "瘦", "兽", "售", "狩", "绶", "收", "手", "守", "首", "寿", "受", "授"],
    "shan": ["山", "舢", "删", "杉", "芟", "姗", "珊", "舢", "删", "杉", "芟", "姗", "珊", "苫", "苦", "煽", "潸", "膻", "闪", "陕", "剡"],
    "shen": ["申", "伸", "身", "呻", "莘", "娠", "深", "绅", "砷", "娠", "深", "绅", "砷", "神", "沈", "审", "婶", "谂", "哂", "矧"],
    "shang": ["商", "伤", "殇", "汤", "墒", "熵", "裳", "垧", "晌", "赏", "上", "尚", "商", "伤", "殇", "汤", "墒", "熵", "裳"],
    "sheng": ["生", "升", "声", "牲", "笙", "甥", "绳", "省", "眚", "圣", "胜", "晟", "盛", "剩", "乘", "生", "升", "声", "牲", "笙"],
    "shong": ["嗙", "嗙"],
    "shuai": ["衰", "摔", "甩", "帅", "率", "蟀", "衰", "摔", "甩", "帅", "率"],
    "shui": ["水", "氵", "氺", "睡", "税", "说", "水", "氵", "氺", "睡", "税", "说"],
    "shun": ["吮", "顺", "舜", "瞬", "吮", "顺", "舜", "瞬"],

    # 十九、声母r开头拼音（新增完整覆盖）
    "re": ["惹", "热", "喏", "惹", "热", "喏"],
    "ri": ["日", "驲", "囸", "日", "驲", "囸"],
    "ru": ["如", "茹", "儒", "孺", "蠕", "濡", "襦", "汝", "乳", "辱", "入", "洳", "铷", "颥", "缛", "褥", "如", "茹", "儒", "孺", "蠕"],
    "rui": ["氻", "蕊", "蕤", "芮", "枘", "锐", "瑞", "睿", "蚋", "氻", "蕊", "蕤", "芮", "枘", "锐"],
    "rao": ["荛", "饶", "桡", "扰", "娆", "绕", "荛", "饶", "桡", "扰", "娆", "绕"],
    "rou": ["肉", "揉", "糅", "蹂", "鞣", "肉", "揉", "糅", "蹂", "鞣"],
    "ran": ["然", "燃", "冉", "苒", "染", "髯", "蚺", "然", "燃", "冉", "苒", "染", "髯"],
    "ren": ["人", "仁", "壬", "忍", "荏", "稔", "刃", "认", "仞", "任", "纫", "韧", "饪", "妊", "衽", "人", "仁", "壬", "忍", "荏"],
    "rang": ["嚷", "壤", "攘", "瓤", "让", "禳", "嚷", "壤", "攘", "瓤", "让", "禳"],
    "reng": ["扔", "仍", "扔", "仍"],
    "rong": ["戎", "茸", "荣", "容", "嵘", "蓉", "溶", "榕", "熔", "融", "冗", "肜", "狨", "戎", "茸", "荣", "容", "嵘", "蓉"],

    # 二十、声母y开头拼音（补充缺失项）
    "ya": ["丫", "呀", "押", "鸦", "桠", "鸭", "牙", "伢", "芽", "岈", "琊", "蚜", "崖", "涯", "睚", "衙", "哑", "痖", "雅", "亚", "讶", "迓", "娅", "砑", "氩", "丫", "呀", "押"],
    "ye": ["耶", "噎", "爷", "揶", "也", "冶", "野", "业", "叶", "曳", "页", "邺", "夜", "液", "掖", "腋", "谒", "靥", "耶", "噎", "爷", "揶", "也"],
    "yu": ["亐", "淤", "渝", "逾", "予", "余", "妤", "盂", "臾", "鱼", "俞", "禺", "竽", "娱", "谀", "渔", "隅", "揄", "雩", "嵛", "逾", "觎", "毹", "予", "余", "妤", "盂"],
    "yi": ["一", "乙", "伊", "衣", "医", "咿", "猗", "噫", "黟", "依", "祎", "咿", "猗", "噫", "黟", "仪", "圯", "夷", "沂", "宜", "怡", "咦", "贻", "胰", "移"],
    "yin": ["因", "阴", "茵", "荫", "音", "殷", "氤", "喑", "堙", "吟", "垠", "银", "淫", "寅", "夤", "鄞", "引", "蚓", "隐", "瘾", "饮", "尹", "吲", "因", "阴", "茵", "荫"],
    "yang": ["央", "泱", "殃", "秧", "鸯", "鞅", "扬", "羊", "阳", "杨", "炀", "佯", "疡", "徉", "洋", "氧", "痒", "养", "氧", "痒", "养", "仰", "怏", "样", "恙"],
    "ying": ["应", "英", "莺", "婴", "瑛", "樱", "璎", "鹦", "鹰", "膺", "缨", "罂", "莹", "萤", "营", "萦", "荧", "茔", "荥", "盈", "楹", "莹", "萤", "营", "萦"],
    "yong": ["佣", "拥", "痈", "邕", "庸", "慵", "雍", "墉", "镛", "鳙", "饔", "甬", "永", "咏", "泳", "俑", "勇", "涌", "恿", "蛹", "踊", "佣", "拥", "痈", "邕"],
    "you": ["优", "忧", "攸", "呦", "幽", "悠", "麀", "尤", "由", "犹", "邮", "油", "柚", "疣", "莜", "莸", "铀", "游", "尤", "由", "犹", "邮", "油", "柚"],
    "yan": ["咽", "恹", "殷", "淹", "焉", "烟", "胭", "腌", "阉", "阏", "严", "妍", "岩", "沿", "炎", "研", "盐", "阎", "筵", "蜒", "檐", "奄", "兖", "俨", "偃"],
    "yao": ["幺", "夭", "吆", "妖", "要", "腰", "邀", "爻", "尧", "姚", "窑", "谣", "摇", "徭", "遥", "瑶", "轺", "肴", "爻", "尧", "姚", "窑", "谣", "摇"],
    "yue": ["曰", "约", "月", "乐", "岳", "钥", "悦", "钺", "阅", "跃", "粤", "越", "樾", "龠", "曰", "约", "月", "乐", "岳", "钥"],
    "yuan": ["冤", "渊", "鸢", "元", "员", "园", "沅", "垣", "爰", "原", "圆", "袁", "援", "湲", "媛", "缘", "猿", "塬", "辕", "冤", "渊", "鸢", "元", "员"],
    "yun": ["晕", "云", "匀", "纭", "芸", "耘", "昀", "允", "狁", "陨", "殒", "孕", "运", "郓", "恽", "晕", "云", "匀", "纭", "芸", "耘"],

    # 二十一、声母w开头拼音（新增完整覆盖）
    "wa": ["洼", "挖", "哇", "蛙", "娲", "Wa", "瓦", "佤", "瓦", "佤", "袜", "腽", "袜", "腽"],
    "wo": ["莴", "涡", "窝", "蜗", "倭", "喔", "我", "沃", "肟", "卧", "握", "幄", "渥", "龌", "莴", "涡", "窝", "蜗", "倭", "喔"],
    "wu": ["乌", "圬", "污", "邬", "呜", "钨", "巫", "屋", "无", "毋", "芜", "吾", "吴", "捂", "梧", "蜈", "五", "午", "伍", "仵", "邬", "呜", "钨", "巫", "屋"],
    "wai": ["歪", "崴", "外", "歪", "崴", "外"],
    "wei": ["危", "委", "威", "逶", "偎", "隈", "薇", "微", "巍", "为", "韦", "圩", "围", "帏", "沩", "桅", "唯", "帷", "惟", "韦", "圩", "围", "帏", "沩"],
    "wan": ["弯", "剜", "湾", "蜿", "丸", "纨", "完", "玩", "顽", "烷", "宛", "婉", "菀", "琬", "碗", "晚", "挽", "娩", "弯", "剜", "湾", "蜿", "丸"],
    "wen": ["温", "瘟", "文", "纹", "蚊", "闻", "阌", "雯", "刎", "吻", "紊", "稳", "问", "温", "瘟", "文", "纹", "蚊", "闻", "阌"],
    "wang": ["汪", "王", "亡", "枉", "罔", "往", "惘", "魍", "妄", "忘", "旺", "望", "王", "亡", "枉", "罔", "往", "惘", "魍"],
    "weng": ["翁", "嗡", "瓮", "蓊", "蕹", "翁", "嗡", "瓮", "蓊", "蕹"],
    "wo": ["莴", "涡", "窝", "蜗", "倭", "喔", "我", "沃", "肟", "卧", "握", "幄", "渥", "龌"],
    "wu": ["乌", "圬", "污", "邬", "呜", "钨", "巫", "屋", "无", "毋", "芜", "吾", "吴", "捂", "梧", "蜈", "五", "午", "伍", "仵"]
}


    # 自定义输入法类
    class CustomInputMethod:
        def __init__(self):
            self.current_pinyin = ""  # 当前输入的拼音
            self.candidates = []      # 候选词列表
            self.selected_index = 0   # 当前选中的候选词索引
            self.input_text = ""      # 最终输入的文本
            
        def reset(self):
            """重置输入法状态"""
            self.current_pinyin = ""
            self.candidates = []
            self.selected_index = 0
            
        def add_pinyin(self, char):
            """添加拼音字符"""
            self.current_pinyin += char
            self.update_candidates()
            self.selected_index = 0
            
        def backspace(self):
            """删除最后一个拼音字符"""
            if self.current_pinyin:
                self.current_pinyin = self.current_pinyin[:-1]
                self.update_candidates()
                self.selected_index = 0
            else:
                # 如果没有拼音，删除最终文本的最后一个字符
                if self.input_text:
                    self.input_text = self.input_text[:-1]
        
        def update_candidates(self):
            """根据当前拼音更新候选词"""
            if not self.current_pinyin:
                self.candidates = []
                return
                
            # 查找匹配的候选词
            self.candidates = []
            for pinyin, words in PINYIN_DICT.items():
                if pinyin.startswith(self.current_pinyin):
                    self.candidates.extend(words)
            
            # 去重并限制数量
            self.candidates = list(dict.fromkeys(self.candidates))[:9]
            
        def select_candidate(self, index):
            """选择候选词"""
            if 0 <= index < len(self.candidates):
                selected_word = self.candidates[index]
                self.input_text += selected_word
                self.reset()
                return True
            return False
            
        def next_candidate(self):
            """选择下一个候选词"""
            if self.candidates:
                self.selected_index = (self.selected_index + 1) % len(self.candidates)
                
        def prev_candidate(self):
            """选择上一个候选词"""
            if self.candidates:
                self.selected_index = (self.selected_index - 1) % len(self.candidates)
                
        def get_display_text(self):
            """获取显示文本（拼音+候选词）"""
            if not self.current_pinyin:
                return self.input_text
                
            display = self.input_text + "[" + self.current_pinyin
            if self.candidates and self.selected_index < len(self.candidates):
                display += " " + self.candidates[self.selected_index]
            display += "]"
            return display

    # 全局输入法实例
    custom_ime = CustomInputMethod()

    def ensure_custom_input_method():
        """
        确保使用自定义输入法
        """
        global custom_ime
        custom_ime.reset()

    def Android_input(prompt, default='', allow=None, exclude='{}', length=None, with_none=None, pixel_width=None, mask=None, copypaste=True, multiline=False, **kwargs):
        """
        Android 专用输入函数，使用自定义中文输入法
        在非 Android 平台上使用原生输入
        """
        
        # 非 Android 平台：直接使用原生输入
        if not renpy.android:
            return renpy.input(prompt, default=default, allow=allow, exclude=exclude, 
                        length=length, with_none=with_none, pixel_width=pixel_width, 
                        mask=mask, copypaste=copypaste, multiline=multiline, **kwargs)

        # 重置自定义输入法
        ensure_custom_input_method()
        custom_ime.input_text = default
        
        # Android 平台：使用自定义输入法
        if renpy.config.disable_input:
            return default

        fixed = renpy.exports.in_fixed_rollback()
        renpy.exports.mode('input')

        roll_forward = renpy.exports.roll_forward_info()
        if not isinstance(roll_forward, basestring):
            roll_forward = None

        # 使用回滚数据
        if roll_forward is not None:
            default = roll_forward
            custom_ime.input_text = default

        # 处理 show_ 前缀参数
        show_properties, kwargs = renpy.easy.split_properties(kwargs, "show_", "")

        if kwargs:
            raise TypeError("Android_input() got unexpected keyword argument(s): {}".format(", ".join(kwargs.keys())))

        # 使用自定义输入法屏幕
        screen_name = "custom_ime_screen"
        
        if renpy.exports.has_screen(screen_name):
            # 准备输入属性
            input_properties = dict(
                default=default, 
                length=length, 
                allow=allow, 
                exclude=exclude, 
                editable=not fixed, 
                pixel_width=pixel_width, 
                mask=mask, 
                copypaste=copypaste, 
                multiline=multiline
            )
            
            # 显示自定义输入法屏幕
            renpy.exports.show_screen(screen_name, _transient=True, 
                                    prompt=prompt, 
                                    input_properties=input_properties,
                                    **show_properties)
        else:
            # 回退到默认输入实现
            renpy.ui.window(style='input_window')
            renpy.ui.vbox()
            renpy.ui.text(prompt, style='input_prompt')
            
            inputwidget = renpy.ui.input(
                default, 
                length=length, 
                style='input_text', 
                allow=allow, 
                exclude=exclude
            )

            if fixed:
                inputwidget.disable()

            renpy.ui.close()

        renpy.exports.shown_window()

        if renpy.config.autosave_on_input and not renpy.game.after_rollback:
            renpy.loadsave.force_autosave(True)

        if fixed:
            renpy.ui.saybehavior()

        rv = renpy.ui.interact(mouse='prompt', type="input", roll_forward=roll_forward)
        renpy.exports.checkpoint(rv)

        if with_none is None:
            with_none = renpy.config.implicit_with_none

        if with_none:
            renpy.game.interface.do_with(None, None)

        return rv

    # 自定义输入法屏幕动作
    class IMEAction(Action):
        def __init__(self, action_type, value=None):
            self.action_type = action_type
            self.value = value
            
        def __call__(self):
            global custom_ime
            
            if self.action_type == "add_pinyin":
                custom_ime.add_pinyin(self.value)
            elif self.action_type == "backspace":
                custom_ime.backspace()
            elif self.action_type == "select_candidate":
                custom_ime.select_candidate(self.value)
            elif self.action_type == "next_candidate":
                custom_ime.next_candidate()
            elif self.action_type == "prev_candidate":
                custom_ime.prev_candidate()
            elif self.action_type == "confirm":
                # 确认输入
                renpy.ui.returns(custom_ime.input_text)
                renpy.ui.restart_interaction()
            elif self.action_type == "cancel":
                # 取消输入
                renpy.ui.returns("")
                renpy.ui.restart_interaction()
                
            renpy.restart_interaction()
            return True

    # 自定义输入法屏幕变量
    def get_ime_display_text():
        return custom_ime.get_display_text()
        
    def get_ime_candidates():
        return custom_ime.candidates
        
    def get_ime_selected_index():
        return custom_ime.selected_index


screen custom_ime_screen(prompt, input_properties):

    modal True
    
    # 输入法状态变量
    default display_text = get_ime_display_text()
    default candidates = get_ime_candidates()
    default selected_index = get_ime_selected_index()
    
    # 半透明背景
    add Solid("#00000080")
    
    # 主输入区域
    frame:
        style_prefix "custom_ime"
        xalign 0.5
        yalign 0.1
        xsize 1000
        
        vbox:
            spacing 15
            
            # 提示文本
            text prompt:
                style "custom_ime_prompt"
                xalign 0.5
                
            # 显示区域
            frame:
                style "custom_ime_display_frame"
                text display_text:
                    style "custom_ime_display_text"
                    xalign 0.0
                    
            # 候选词区域
            if candidates:
                hbox:
                    spacing 10
                    xalign 0.5
                    for i, candidate in enumerate(candidates):
                        textbutton "[candidate]":
                            style "custom_ime_candidate_button"
                            if i == selected_index:
                                background Solid("#007AFF")
                            else:
                                background Solid("#e0e0e0")
                            action IMEAction("select_candidate", i)
    
    # 键盘区域
    frame:
        style_prefix "custom_ime"
        xalign 0.5
        yalign 0.9
        xsize 1000
        
        vbox:
            spacing 10
            
            # 第一行：q w e r t y u i o p
            hbox:
                spacing 8
                xalign 0.5
                for key in ["q", "w", "e", "r", "t", "y", "u", "i", "o", "p"]:
                    textbutton key.upper():
                        style "custom_ime_key_button"
                        action IMEAction("add_pinyin", key)
            
            # 第二行：a s d f g h j k l
            hbox:
                spacing 8
                xalign 0.5
                for key in ["a", "s", "d", "f", "g", "h", "j", "k", "l"]:
                    textbutton key.upper():
                        style "custom_ime_key_button"
                        action IMEAction("add_pinyin", key)
            
            # 第三行：z x c v b n m
            hbox:
                spacing 8
                xalign 0.5
                for key in ["z", "x", "c", "v", "b", "n", "m"]:
                    textbutton key.upper():
                        style "custom_ime_key_button"
                        action IMEAction("add_pinyin", key)
                
                # 退格键
                textbutton "⌫":
                    style "custom_ime_special_button"
                    action IMEAction("backspace")
            
            # 第四行：功能键
            hbox:
                spacing 8
                xalign 0.5
                
                textbutton "上页":
                    style "custom_ime_special_button"
                    action IMEAction("prev_candidate")
                    
                textbutton "下页":
                    style "custom_ime_special_button" 
                    action IMEAction("next_candidate")
                    
                textbutton "空格":
                    style "custom_ime_special_button"
                    action IMEAction("add_pinyin", " ")
                    
                textbutton "取消":
                    style "custom_ime_cancel_button"
                    action IMEAction("cancel")
                    
                textbutton "确定":
                    style "custom_ime_confirm_button"
                    action IMEAction("confirm")

    # 键盘快捷键
    key "K_BACKSPACE" action IMEAction("backspace")
    key "K_RETURN" action IMEAction("confirm")
    key "K_ESCAPE" action IMEAction("cancel")
    key "K_LEFT" action IMEAction("prev_candidate")
    key "K_RIGHT" action IMEAction("next_candidate")
    
    # 字母键映射
    $ key_mapping = {
        "a": "a", "b": "b", "c": "c", "d": "d", "e": "e", "f": "f", "g": "g", 
        "h": "h", "i": "i", "j": "j", "k": "k", "l": "l", "m": "m", "n": "n",
        "o": "o", "p": "p", "q": "q", "r": "r", "s": "s", "t": "t", "u": "u",
        "v": "v", "w": "w", "x": "x", "y": "y", "z": "z"
    }
    
    for key, value in key_mapping.items():
        key key action IMEAction("add_pinyin", value)


style custom_ime_frame:
    background Solid("#f8f8f8")
    padding (20, 20, 20, 20)


style custom_ime_prompt:
    color "#333333"
    size 28
    text_align 0.5
    xalign 0.5

style custom_ime_display_frame:
    background Solid("#ffffff")
    padding (15, 15, 15, 15)
    xfill True


style custom_ime_display_text:
    color "#333333"
    size 32
    xalign 0.0

style custom_ime_candidate_button:
    padding (15, 10, 15, 10)
    minimum (80, 45)


style custom_ime_key_button:
    background Solid("#e8e8e8")
    hover_background Solid("#d8d8d8")
    selected_background Solid("#c8c8c8")
    padding (20, 15, 20, 15)
    minimum (60, 50)


style custom_ime_special_button:
    background Solid("#d0d0d0")
    hover_background Solid("#c0c0c0")
    padding (25, 15, 25, 15)
    minimum (80, 50)


style custom_ime_cancel_button:
    background Solid("#ff6b6b")
    hover_background Solid("#ff5252")
    padding (25, 15, 25, 15)
    minimum (80, 50)


style custom_ime_confirm_button:
    background Solid("#4cd964")
    hover_background Solid("#44c955")
    padding (25, 15, 25, 15)
    minimum (80, 50)
